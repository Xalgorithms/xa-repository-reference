sudo: required
language: ruby
services:
  - docker

script:
  - docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
  - docker build -t karfai42/xa-repository-reference:production -f Dockerfile.production .
  - docker push karfai42/xa-repository-reference:production
  - if [ ! -z "$TRAVIS_TAG" ]; then
      docker build -t karfai42/xa-repository-reference:$TRAVIS_TAG -t karfai42/xa-repository-reference:latest -f Dockerfile.production .
      docker push karfai42/xa-repository-reference:$TRAVIS_TAG
      docker push karfai42/xa-repository-reference:latest
    fi
